<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Wijit-Code Web Component</title>
	<script type="module" src="src/wijit-code.js"></script>
	<script type="module" src="extra/wijit-form.js"></script>
	<link rel="stylesheet" href="styles.css">
	<link rel="stylesheet" href="src/highlight.css">

	<style>
		wijit-code {
			--indent: 2;
	    	background-color: var(--bg1);
	    	border-radius: .5rem;
			font-weight: normal;
			padding: .5rem;
	    }

	    wijit-code[inline] {
			overflow: auto;
	    	padding: .25rem;
	    }

	    textarea {
	    	flex-basis: 500px;
	    }
	</style>
</head>
<body>
	<h1>Wijit-Code Web Component</h1>
	<p>A custom element for displaying code snippets with consistent formatting.</p>

	<details>
	<summary>Instructions</summary>

		<h2>Usage</h2>
		<section>
			<header>
				<ul>
					<li><h3>Add the Script</h3>
						<ul>
							<li><code>
							&lt;script type="module" src="wijit-code.js">&lt;/script>
							</code></li>
						</ul>
					</li>
					<li><h3>Wrap your code in a
						<wijit-code inline><wijit-code></wijit-code></wijit-code>
						 tag</h3>
					</li>
				</ul>
			</header>

			<wijit-code>
				<wijit-code >
					<div>
						<strong>Some HTML</strong>
					</div>
				</wijit-code >
			</wijit-code>

			<wijit-code>
				<wijit-code >
					function someFunction(value) {
						return value;
					}
				</wijit-code >
			</wijit-code>
		</section>
		<section>
			<h2>Available Attributes</h2>
			<ul>
				<li><strong>inline</strong> (default: false) | Acceptable values [null, 'true', 'false']
					<ul>
						<li>Add this attribute if you want the code to appear inline instead of as a block of text. It does not require a value, but if you need to give it a value for some reason, use "true" or "false". "false" negates the effect as if the attribute were not present at all. If you need to adjust the css for inline code, the css selector is: <wijit-code inline>wijit-code[inline]{...}</wijit-code></li>
					</ul>
				</li>

				<li><strong>indent</strong> (default: 2) | Acceptable values [any positive integer or most css lengths such as 4px, 4rem etc]
					<ul>
						<li>Add this attribute to customize the degree of indentation.</li>
					</ul>
				</li>
			</ul>
		</section>
	</details>

	<!-- <h2>Demo</h2>
	<wijit-form wait="false" success="false">
		<section class="row center">
			<div>
				<label for="demo-indent">indent</label>
				<input name="indent" value="2" id="demo-indent" list="demo-indents" oninput="change(this, 'indent')">
				<datalist id="demo-indents">
					<option>1</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>1rem</option>
					<option>2rem</option>
					<option>3rem</option>
					<option>4rem</option>
					<option>1px</option>
					<option>2px</option>
					<option>3px</option>
					<option>4px</option>
				</datalist>

			</div>
			<div>
				<label for="demo-inline">inline</label>
				<input type="checkbox" name="inline" id="demo-inline" onchange="change(this, 'inline')">
			</div>
		</section>
		<section class="row">
			<div>
				<label for="demo-ta">Sample Code</label>
				<textarea name="sample" id="demo-ta">
function level1() {
 function level2() {
  function level3() {
   function level4() {
    function level5() {
     console.log("5th nested level.");
    }
    level5();
   }
   level4();
  }
  level3();
 }
 level2();
}
level1();
				</textarea>
			</div>
			<fieldset>
				<legend>Result</legend>
				<wijit-code id="demo-result">
				</wijit-code>
			</fieldset>
		</section>
	</wijit-form> -->

	<section>
		<header><h2>Highlights</h2></header>

		<textarea is="wijit-ta" indent="4" highlight="html">
			//-- Highlight
			<section class="row center">
				<div>
					<label for="demo-indent">indent</label>
					<input
						name="indent"
						value="2"
						id="demo-indent"
						list="demo-indents"
						oninput="change(this, 'indent')">

					<datalist id="demo-indents">
						<option>1</option>
						<option>3px</option>
						<option>4px</option>
					</datalist>

				</div>
				<div>
					<label for="demo-inline">inline</label>
					<input type="checkbox" name="inline" id="demo-inline" onchange="change(this, 'inline')">
				</div>
			</section>
		</textarea>

		<wijit-code highlight="html">
			//-- Highlight
			<section class="row center">
			<div>
				<label for="demo-indent">indent</label>
				<input
					name="indent"
					value="2"
					id="demo-indent"
					list="demo-indents"
					oninput="change(this, 'indent')">

				<datalist id="demo-indents">
					<option>1</option>
					<option>3px</option>
					<option>4px</option>
				</datalist>

			</div>
			<div>
				<label for="demo-inline">inline</label>
				<input type="checkbox" name="inline" id="demo-inline" onchange="change(this, 'inline')">
			</div>
		</section>
		</wijit-code>
	</section>

	<section>
		<header><h2>Inline Code</h2></header>
		<div class="row">
			<wijit-code inline>
				<wijit-code inline="true" >...</wijit-code >
			</wijit-code>
		</div>
		<div>
			<p>Some text <wijit-code inline> function foo() {}</wijit-code> some more text.</p>
		</div>
		<div class="row">
			<wijit-code inline>
				function foo (baz, bam) {
					for (const bar of baz) {
						for (const boom of bam) {
							if (bar === boom) {
								value = bam;
							} else {
								value = baz;
							}
						}
					}
				}
			</wijit-code>
		</div>
	</section>

	<section class="row">
		<div>
			<header><h3>Custom Tab Size (integer)</h3></header>
			<wijit-code indent="4">
				<wijit-code indent="4" >
					<article>
						<header>
							<h1>A Title</h1>
						</header>
						<p>Some text</p>
					</article>
				</wijit-code >
			</wijit-code>
		</div>

		<div>
			<header><h3>Custom Tab Size (css length)</h3></header>
			<wijit-code html indent=".5rem">
				<wijit-code indent=".5rem" >
					<article>
						<header>
							<h1>A Title</h1>
						</header>
						<p>Some text</p>
					</article>
				</wijit-code >
			</wijit-code>
		</div>
	</section>

	<!-- <script>
		const textarea = document.querySelector('textarea#demo-ta');
		const demoResult = document.querySelector('wijit-code#demo-result');
		const inputs = document.querySelectorAll('input');
		demoResult.textContent = textarea.value;

		// Modify content of #demo-result when textarea changes.
		// Since #demo-result is a wijit-code custom element, this automatically triggers an update
		textarea.addEventListener ('input', (event) => {
			demoResult.innerHTML = event.target.value;
		});

		// Enable tabbing inside of textarea
		textarea.addEventListener('keydown', (event) => {
			if (event.key === 'Tab') {
				event.preventDefault();
				const ta = event.target;
				const start = ta.selectionStart;
				const end = ta.selectionEnd;
				const before = ta.value.substring(0, start);
				const after = ta.value.substring(end);
				ta.value = before + "\t" + after;
				ta.selectionStart = ta.selectionEnd = start + 1;
				const inputEvent = new Event ('input');
				ta.dispatchEvent(inputEvent);
    		}
		});

		// Change attribute value of demoResult element.
		// "#demoResult" is a wijit-code custom element.
		function change(elem, attr) {
			let value = elem.value;
			if (elem.type === 'checkbox' || elem.type === 'radio') {
				value = (elem.checked) ? 'true' : 'false';
			}

			demoResult.setAttribute(attr, value);
		}

		for (const input of inputs) {
			input.addEventListener('focus', event => {
				event.target.select();
			});

			input.addEventListener('click', event => {
				event.target.select();
			});

			input.addEventListener('keydown', event => {
				if (event.key === "Enter") {
					event.target.select();
				}
			})
		}
	</script> -->
</body>
</html>
